# ---------------------------------------------------------------------------------------
# -- 屏幕和监视器设置 --
# ---------------------------------------------------------------------------------------
# 使用 `hyprctl monitors` 命令查看你的显示器名称 (例如 eDP-1, DP-1)
monitor=,preferred,auto,1.25

env = http_proxy,http://127.0.0.1:2080
env = https_proxy,http://127.0.0.1:2080

env = HTTP_PROXY,http://127.0.0.1:2080
env = HTTPS_PROXY,http://127.0.0.1:2080

env = no_proxy,localhost,127.0.0.1,192.168.0.0/16,*.local
env = NO_PROXY,localhost,127.0.0.1,192.168.0.0/16,*.local

# exec-once 会在 Hyprland 启动时执行一次

# Waybar 状态栏
exec-once = waybar &

# hyprpaper 壁纸程序
exec-once = hyprpaper &

# dunst 通知守护进程
exec-once = dunst &

# 输入法
exec-once = fcitx5 &

# 网络连接
exec-once = nm-applet --indicator

# 锁屏
exec-once = ~/.config/hypr/scripts/idle.sh

# 剪贴板
exec-once = wl-paste --watch cliphist store

# 启动 Polkit 代理（用于授权）
# exec-once = /usr/lib/polkit-kde-authentication-agent-1

# ---------------------------------------------------------------------------------------
# -- 输入设备 (鼠标, 键盘, 触摸板) --
# ---------------------------------------------------------------------------------------
input {
    kb_layout = us                     # 键盘布局
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1                   # 焦点跟随鼠标

    # --- 鼠标设置 ---
    sensitivity = -0.15                # 鼠标灵敏度 (-1.0 到 1.0)
    accel_profile = flat               # 关闭鼠标加速

    # --- 触摸板设置 ---
    # touchpad {
    #     natural_scroll = no            # 关闭自然滚动
    #     disable_while_typing = yes     # 打字时禁用触摸板
    # }
}

# --- 禁用笔记本内置触摸板 ---
# 1. 在终端运行 `hyprctl devices`
# 2. 找到触摸板设备名称
device {
    name = elan076d:00-04f3:3244-touchpad
    enabled = false
}

env = XCURSOR_THEME,Breeze_Light

# ---------------------------------------------------------------------------------------
# -- 通用设置 (General) --
# ---------------------------------------------------------------------------------------
general {
    # 窗口之间的间隙
    gaps_in = 2

    # 窗口与屏幕边缘的间隙
    gaps_out = 4

    # 边框大小
    border_size = 3

    # ff - 完全不透明
    # dd - 87%
    # cc -
    # aa - 67%
    # 88 - 53%
    # 55 - 33%
    # 00 - 完全透明
    # 激活窗口边框颜色
    col.active_border = rgba(d6a99ddd)

    # 非激活窗口边框颜色
    col.inactive_border = rgba(d6a99d55)

    # 布局: dwindle (螺旋) 或 master (主次)
    layout = dwindle
}

# ---------------------------------------------------------------------------------------
# -- 装饰 (窗口样式) --
# ---------------------------------------------------------------------------------------
decoration {
    rounding = 10
    blur {
        enabled = false
    }
    shadow {
        enabled = false
    }
    # blur {
    #     enabled = true
    #     size = 3
    #     passes = 1
    # }
    # shadow {
    #     enabled = true
    #     range = 2
    #     render_power = 3
    #     color = rgba(1a1a1aee)
    # }
}

# ---------------------------------------------------------------------------------------
# -- 动画效果 --
# ---------------------------------------------------------------------------------------
animations {
    enabled = true
    # Animation curves
    bezier = linear, 0, 0, 1, 1
    bezier = md3_standard, 0.2, 0, 0, 1
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = crazyshot, 0.1, 1.5, 0.76, 0.92 
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = menu_decel, 0.1, 1, 0, 1
    bezier = menu_accel, 0.38, 0.04, 1, 0.07
    bezier = easeInOutCirc, 0.85, 0, 0.15, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    bezier = softAcDecel, 0.26, 0.26, 0.15, 1
    bezier = md2, 0.4, 0, 0.2, 1 # use with .2s duration
    # Animation configs
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = windowsIn, 1, 3, md3_decel, popin 60%
    animation = windowsOut, 1, 3, md3_accel, popin 60%
    animation = border, 1, 10, default
    animation = fade, 1, 3, md3_decel
    # animation = layers, 1, 2, md3_decel, slide
    animation = layersIn, 1, 3, menu_decel, slide
    animation = layersOut, 1, 1.6, menu_accel
    animation = fadeLayersIn, 1, 2, menu_decel
    # 像 rofi 这种通知.窗口的退出动画
    # animation = fadeLayersOut, 1, 4.5, menu_accel
    animation = workspaces, 1, 7, menu_decel, slide
    # animation = workspaces, 1, 2.5, softAcDecel, slide
    # animation = workspaces, 1, 7, menu_decel, slidefade 15%
    # animation = specialWorkspace, 1, 3, md3_decel, slidefadevert 15%
    animation = specialWorkspace, 1, 3, md3_decel, slidevert
}

# ---------------------------------------------------------------------------------------
# -- 布局设置 --
# ---------------------------------------------------------------------------------------
# dwindle {
#     pseudotile = yes
#     preserve_split = yes
# }

# master {
#     new_is_master = true
# }

# ---------------------------------------------------------------------------------------
# -- 字体设置 --
# ---------------------------------------------------------------------------------------
# 使用 `fc-list` 命令查看你系统中可用的字体
# 推荐使用 Nerd Font 以正确显示图标
misc {
    force_default_wallpaper = 0 # 禁用 hyprland 默认壁纸
}

# font_family = 'Adwaita Sans'

# ---------------------------------------------------------------------------------------
# -- 窗口规则 (Window Rules) --
# ---------------------------------------------------------------------------------------
windowrulev2 = size 55% 75%, class:nekoray
windowrulev2 = float, class:nekoray

windowrulev2 = float, class:org.kde.dolphin
windowrulev2 = size 55% 75%, class:org.kde.dolphin

windowrulev2 = float, class:mpv
windowrulev2 = size 55% 75%, class:mpv

# windowrulev2 = fullscreen, class:io.github.ungoogled_software.ungoogled_chromium
windowrulev2 = workspace 9, class:io.github.ungoogled_software.ungoogled_chromium
windowrulev2 = workspace 8, class:org.telegram.desktop

# ---------------------------------------------------------------------------------------
# -- 按键绑定 (Keybinds) --
# ---------------------------------------------------------------------------------------

# 定义主修饰键 (Mod key)
$Mod = SUPER

# --- 应用程序启动 ---
bind = $Mod, RETURN, exec, kitty
bind = $Mod, E, exec, dolphin

# rofi
bind = ALT, SPACE, exec, ~/.config/hypr/scripts/rofi.sh

# 打开剪贴板
bind = $Mod, V, exec, ~/.config/hypr/scripts/cliphist.sh
# 删除剪贴板中一个条目
# bind = $Mod SHIFT, V, exec, cliphist list | rofi -dmenu | cliphist delete
# 清空所有剪贴板历史执行: `cliphist wipe`

# --- 窗口/会话管理 ---
bind = $Mod, Q, killactive,             # 关闭当前激活的窗口
bind = $Mod SHIFT, E, exit,             # 退出 Hyprland 会话
bind = $Mod, F, fullscreen,             # 切换全屏
bind = $Mod, SPACE, togglefloating,     # 切换窗口浮动状态

# 锁屏
bind = $Mod, L, exec, swaylock -f --image ~/Pictures/PFP/wallhaven-ogd28l.png

# --- 移动焦点 ---
bind = $Mod, left, movefocus, l
bind = $Mod, right, movefocus, r
bind = $Mod, up, movefocus, u
bind = $Mod, down, movefocus, d
# 或者使用 vim 风格的按键
# bind = $Mod, H, movefocus, l
# bind = $Mod, L, movefocus, r
# bind = $Mod, K, movefocus, u
# bind = $Mod, J, movefocus, d


# --- 移动窗口 ---
bind = $Mod SHIFT, left, movewindow, l
bind = $Mod SHIFT, right, movewindow, r
bind = $Mod SHIFT, up, movewindow, u
bind = $Mod SHIFT, down, movewindow, d
# 或者使用 vim 风格的按键
# bind = $Mod SHIFT, H, movewindow, l
# bind = $Mod SHIFT, L, movewindow, r
# bind = $Mod SHIFT, K, movewindow, u
# bind = $Mod SHIFT, J, movewindow, d

# --- 切换工作区 ---
bind = $Mod, 1, workspace, 1
bind = $Mod, 2, workspace, 2
bind = $Mod, 3, workspace, 3
bind = $Mod, 4, workspace, 4
bind = $Mod, 5, workspace, 5
bind = $Mod, 6, workspace, 6
bind = $Mod, 7, workspace, 7
bind = $Mod, 8, workspace, 8
bind = $Mod, 9, workspace, 9
bind = $Mod, 0, workspace, 10

# --- 将窗口移动到工作区 ---
bind = $Mod SHIFT, 1, movetoworkspace, 1
bind = $Mod SHIFT, 2, movetoworkspace, 2
bind = $Mod SHIFT, 3, movetoworkspace, 3
bind = $Mod SHIFT, 4, movetoworkspace, 4
bind = $Mod SHIFT, 5, movetoworkspace, 5
bind = $Mod SHIFT, 6, movetoworkspace, 6
bind = $Mod SHIFT, 7, movetoworkspace, 7
bind = $Mod SHIFT, 8, movetoworkspace, 8
bind = $Mod SHIFT, 9, movetoworkspace, 9
bind = $Mod SHIFT, 0, movetoworkspace, 10

# --- 切换工作区 ---
# bind = $Mod, mouse_down, workspace, e+1
# bind = $Mod, mouse_up, workspace, e-1
# bind = $Mod, left, workspace, e-1
# bind = $Mod, right, workspace, e+1
bind = $Mod, TAB, workspace, e+1

# --- 使用鼠标移动和缩放窗口 ---
bindm = $Mod, mouse:272, movewindow
bindm = $Mod, mouse:273, resizewindow
